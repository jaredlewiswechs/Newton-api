<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProjectADA</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
<div class="app">

    <!-- ── Left Sidebar ── -->
    <aside class="sidebar">
        <div class="sidebar-brand">
            <div class="brand-icon">A</div>
            <span class="brand-name">Ada</span>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-item active" data-nav="chats" onclick="switchNav('chats')">
                <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2.5" y="2.5" width="15" height="15" rx="3"/></svg>
                Chats
            </div>
            <div class="nav-item" data-nav="knowledge" onclick="switchNav('knowledge')">
                <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 4h14M3 8h14M3 12h10M3 16h7"/></svg>
                Knowledge
            </div>
            <div class="nav-item" data-nav="settings" onclick="switchNav('settings')">
                <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="10" cy="10" r="3"/><path d="M10 2v3M10 15v3M2 10h3M15 10h3M4.2 4.2l2.1 2.1M13.7 13.7l2.1 2.1M4.2 15.8l2.1-2.1M13.7 6.3l2.1-2.1"/></svg>
                Settings
            </div>
        </nav>
        <div class="sidebar-footer">
            <div class="nav-item" style="font-size:13px; color: var(--text-muted);">
                ProjectADA v1.0
            </div>
        </div>
    </aside>

    <!-- ── Chat List Panel ── -->
    <section class="chat-list-panel" id="chatListPanel">
        <div class="chat-list-header">
            <div class="chat-list-top">
                <div>
                    <h1>Chats</h1>
                    <p>All your conversations in one place</p>
                </div>
                <button class="btn-new-chat" onclick="createChat()">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="8" y1="2" x2="8" y2="14"/><line x1="2" y1="8" x2="14" y2="8"/></svg>
                    New Chat
                </button>
            </div>
            <div class="search-box">
                <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="7" cy="7" r="5"/><line x1="11" y1="11" x2="14" y2="14"/></svg>
                <input type="text" placeholder="Search chats..." oninput="filterChats(this.value)">
            </div>
        </div>
        <div class="chat-list" id="chatList">
            <div class="chat-list-empty">No conversations yet. Start one!</div>
        </div>
    </section>

    <!-- ── Conversation Panel ── -->
    <section class="conversation-panel" id="conversationPanel">
        <!-- Header -->
        <div class="conversation-header" id="convHeader" style="display:none;">
            <div class="conversation-header-left">
                <div class="conversation-title" id="convTitle">Conversation</div>
            </div>
            <div class="status-badge">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText">Online</span>
            </div>
        </div>

        <!-- Messages -->
        <div class="messages-container" id="messages" style="display:none;"></div>

        <!-- Welcome (when no chat selected) -->
        <div class="welcome" id="welcomeScreen">
            <div class="welcome-icon">A</div>
            <h2>Welcome to Ada</h2>
            <p>Your self-verifying AI assistant with real-time trajectory feedback, kinematic language analysis, and drift detection.</p>
            <button class="btn-new-chat" onclick="createChat()" style="margin-top:8px;">Start a Conversation</button>
        </div>

        <!-- Trajectory feedback bar -->
        <div class="trajectory-bar hidden" id="trajectoryBar">
            <div class="traj-metric">
                <span class="label">Weight</span>
                <div class="traj-bar-fill"><div class="fill" id="trajWeight" style="width:0%"></div></div>
                <span class="value" id="trajWeightVal">0</span>
            </div>
            <div class="traj-metric">
                <span class="label">Curve</span>
                <span class="value" id="trajCurveVal">0</span>
            </div>
            <div class="traj-metric">
                <span class="label">Commit</span>
                <div class="traj-bar-fill"><div class="fill" id="trajCommit" style="width:0%"></div></div>
                <span class="value" id="trajCommitVal">0</span>
            </div>
            <div class="traj-metric">
                <span class="label">Depth</span>
                <span class="value" id="trajDepthVal">0</span>
            </div>
            <span class="traj-warning" id="trajWarning"></span>
        </div>

        <!-- Input -->
        <div class="input-area" id="inputArea" style="display:none;">
            <div class="input-wrapper">
                <textarea id="messageInput" rows="1" placeholder="Type your message..."
                    oninput="onInputChange(this)" onkeydown="onInputKeydown(event)"></textarea>
                <button class="btn-send" id="btnSend" onclick="sendMessage()">
                    <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 8h12M9 3l5 5-5 5"/></svg>
                </button>
            </div>
        </div>
    </section>

    <!-- ── Knowledge Panel ── -->
    <section class="knowledge-panel" id="knowledgePanel">
        <div class="panel-title">Knowledge Bank</div>
        <div class="panel-subtitle">Pre-verified facts available to Ada (no LLM needed)</div>
        <div id="knowledgeContent">
            <div class="system-card">
                <h3>Loading...</h3>
                <p>Fetching knowledge base status.</p>
            </div>
        </div>
    </section>

    <!-- ── Settings Panel (system status) ── -->
    <section class="settings-panel" id="settingsPanel">
        <div class="panel-title">System Status</div>
        <div class="panel-subtitle">14 intelligence subsystems synthesized into Ada</div>
        <div id="settingsContent">
            <div class="system-card"><h3>Loading... <span class="system-status loading">checking</span></h3><p>Checking all subsystems.</p></div>
        </div>
    </section>

</div>

<script src="/static/app.js"></script>
</body>
</html>
